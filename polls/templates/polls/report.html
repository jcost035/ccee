<head>
    {% load static %}

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="{% static 'site.css' %}" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />


    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto+Condensed:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>

    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.0.385/build/pdf.min.js"></script>



</head>




<body>
    <div>
        {% include "polls/nav.html" %}
        <div id="holder" class="w-full mx-auto flex flex-col space-y-6"></div>
    </div>
</body>


<script>
    function renderPDF(url, canvasContainer, options) {

        options = options || {
            scale: 1
        };

        function renderPage(page) {
            var viewport = page.getViewport(options.scale);
            var wrapper = document.createElement("div");
            wrapper.className = " w-full mx-auto flex flex-col";
            var firstCanvas = document.createElement('firstCanvas');
            firstCanvas.className = "w-2/3";
            var canvas = document.createElement('canvas');
            canvas.className = "w-full";

            var firstCtx = firstCanvas.getContext('2d');
            var firstRenderContext = {
                canvasContext: firstCtx,
                viewport: viewport
            };
            var ctx = canvas.getContext('2d');
            var renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };

            firstCanvas.height = viewport.height;
            firstCanvas.width = viewport.width;
            wrapper.appendChild(canvas)
            canvasContainer.appendChild(wrapper);

            canvas.height = viewport.height;
            canvas.width = viewport.width;
            wrapper.appendChild(canvas)
            canvasContainer.appendChild(wrapper);

            page.render(firstRenderContext)
            page.render(renderContext);
        }

        function renderPages(pdfDoc) {
            for (var num = 2; num <= pdfDoc.numPages; num++)
                pdfDoc.getPage(num).then(renderPage);
        }

        function renderPage(pdfDoc) {
            pdfDoc.getPage(1).then(renderPage);
        }

        PDFJS.disableWorker = true;
        PDFJS.getDocument(url).then(renderPage);
        PDFJS.getDocument(url).then(renderPages);
    }


    renderPDF('{% static 'report/Annual-Report-2019-20_spread_compressed.pdf' %}', document.getElementById('holder'));

</script>